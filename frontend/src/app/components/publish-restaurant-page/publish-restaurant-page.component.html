<section class="flex flex-col justify-center items-center" id="publishRestaurantPage">
  <h1 class="flex justify-center md:text-2xl sm:text-xl text-sm font-semibold md:mb-8 sm:mb-6 mb-3">
    Publish a restaurant
  </h1>
  <div class="size-full flex flex-col justify-center items-center rounded-2xl
              dark:bg-slate-900 bg-white border-2 border-gray-400 px-10 py-8 overflow-visible">
    <form class="size-full flex flex-col justify-center items-center gap-10 w-full" enctype="multipart/form-data" [formGroup]="restaurantForm" (ngSubmit)="onPublish()">
      <div class="grid md:gap-10 sm:gap-8 gap-6 md:grid-cols-2 sm:grid-cols-1 grid-cols-1 w-full">
        <div class="flex flex-col justify-between md:gap-10 sm:gap-8 gap-6">
          <div class="flex flex-col justify-start items-start gap-2">
            <label for="name" class="label_style">Name</label>
            <input class="input_text_style" id="name" type="text" placeholder="Maximum 50 characters" formControlName="name"/>
            @if(this.submitted && this.name?.invalid){
              @if(this.name?.hasError('required')){
                <h3 class="form_error">Name is required</h3>
              }
              @if(this.name?.hasError('minlength')){
                <h3 class="form_error">Name must be at minimum 1 character long</h3>
              }
              @if(this.name?.hasError('maxlength')){
                <h3 class="form_error">Name must be at maximum 50 characters long</h3>
              }
            }
          </div>
          <div class="flex flex-col justify-start items-start gap-2">
            <label for="image" class="label_style">Upload image</label>
            <div class="flex items-center gap-3 input_file_style">
              <label class="upload_button" for="image">
                <svg class="size-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/></svg>
                Choose file
              </label>
              <span class="text-sm text-gray-600 dark:text-gray-300 truncate">{{fileName || 'No file selected' }}</span>
              <input id="image" type="file" (change)="onFileChange($event)" class="sr-only" accept="image/*"/>
            </div>
            @if(this.submitted && this.image?.invalid){
              @if(this.image?.hasError('required')){
                <h3 class="form_error">Image is required</h3>
              }
              @if(this.image?.hasError('forbiddenImageFormat')){
                <h3 class="form_error">File must be an image</h3>
              }
              @if(this.image?.hasError('forbiddenImageSize')){
                <h3 class="form_error">File must be maximum 1.1MB</h3>
              }
            }
          </div>
        </div>
        <div class="flex flex-col justify-start items-start gap-2">
          <label for="description" class="label_style">Description</label>
          <textarea class="size-full input_text_style" id="description" formControlName="description" placeholder="Max 150 characters"></textarea>
          @if(this.submitted && this.description?.invalid){
            @if(this.description?.hasError('required')){
              <h3 class="form_error">Description is required</h3>
            }
            @if(this.description?.hasError('minlength')){
              <h3 class="form_error">Description must be at minimum 1 character long</h3>
            }
            @if(this.description?.hasError('maxlength')){
              <h3 class="form_error">Description must be at minimum 150 character long</h3>
            }
          }
        </div>
      </div>
      <div class="size-full md:min-h-180 sm:min-h-150 min-h-120 flex flex-col justify-start items-start gap-2">
        <label for="map" class="label_style">Address</label>
        <div class="w-full h-full flex-grow relative rounded border border-gray-300 mt-2">
          <app-map (latitudeChange)="updateLatitude($event)" (longitudeChange)="updateLongitude($event)" [isRestaurantPage]="false"></app-map>
        </div>
        <div class="flex justify-start items-start gap-5">
        @if(this.submitted && this.latitude?.invalid){
          @if(this.latitude?.hasError('required')){
            <h3 class="form_error">Latitude is required</h3>
          }
        }
        @if(this.submitted && this.longitude?.invalid){
          @if(this.longitude?.hasError('required')){
            <h3 class="form_error">Longitude is required</h3>
          }
        }
        </div>
      </div>
      <div class="w-full flex justify-between md:px-30 sm:px-20 px-10 items-center">
        <button class="discard_restaurant_button" (click)="onDiscard()">Discard</button>
        <button class="publish_restaurant_button" type="submit">Publish</button>
      </div>
    </form>
  </div>
</section>
